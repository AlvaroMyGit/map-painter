package io.codeforall.javatars;

import org.academiadecodigo.simplegraphics.graphics.Color;

public class Grid {

    protected final int CELL_SIZE = 20;
    protected final int PADDING = 10;
    protected int row;
    protected int col;
    protected MyRectangle[][] rect;
    protected Cursor cursor;
    protected MyKeyboard myKeyboard;

    public Grid(int col, int row) {
        this.row = row;
        this.col = col;
        rect = new MyRectangle[col][row];
        cursor = new Cursor(this);
        myKeyboard = new MyKeyboard(this, cursor, new ApplicationManager(this));
        start();
    }


    // The method we use to initialize the grid, draw the cursor in the initial position
    // And call the addKeyboard()
    protected void start() {
        drawGrid();
        cursor.drawCursor();
        myKeyboard.addKeyboard();
    }

    // Draws the grid using a bi-dimensional array to store the squares generated by this method
    protected void drawGrid() {
        int x = PADDING;
        int y = PADDING;
        for (int i = 0; i < rect.length; i++) {
            for (int j = 0; j < rect.length; j++) {
                rect[i][j] = new MyRectangle(x, y, CELL_SIZE, CELL_SIZE);
                rect[i][j].rectangleDraw(Color.WHITE);
                x += CELL_SIZE;
            }
            x = PADDING;
            y += CELL_SIZE;
        }
    }

    // Resets all squares on the grid back to unpainted mode
    public void clear() {
        for (int i = 0; i < rect.length; i++) {
            for (int j = 0; j < rect.length; j++) {
                if (rect[i][j].isPainted()){
                    rect[i][j].rectangleDelete();
                }
            }
        }
    }

    // Getters
    public MyRectangle[][] getRect() {
        return rect;
    }
    public int getRow() {
        return row;
    }
    public int getCol() {
        return col;
    }
}
